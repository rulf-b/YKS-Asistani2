{# templates/haftalik_plan.html #}
{% extends "layout.html" %}
{% block content %}
    <div class="text-center">
        <h2 class="mb-3 text-primary"><i class="bi bi-calendar2-week me-2"></i> KiÅŸiselleÅŸtirilmiÅŸ HaftalÄ±k PlanÄ±n</h2>
        <p class="lead text-muted mb-5">Son verilerine gÃ¶re yapay zekÃ¢ tarafÄ±ndan oluÅŸturulan 7 gÃ¼nlÃ¼k yol haritan aÅŸaÄŸÄ±dadÄ±r.</p>
        <form method="POST" action="" id="plan-form"> {# Bir id ekledik #}
            <button type="submit" class="btn btn-success btn-lg my-4" id="plan-button"><i class="bi bi-magic me-2"></i> Yeni ve GÃ¼ncel Bir Plan OluÅŸtur</button>
        </form>
    </div>

    <hr class="my-5">

    {% if plan %}
        <div class="mt-4">
            <div class="card shadow-sm">
                <div class="card-header fw-bold bg-primary text-white">
                    ğŸš€ Ä°ÅŸte Bu Haftaki GÃ¶revlerin!
                </div>
                <div class="card-body" style="white-space: pre-wrap; font-family: 'Inter', sans-serif; line-height: 1.8; color: var(--text-dark);">
                    {{ plan }}
                </div>
            </div>
        </div>
    {% else %}
        <div class="alert alert-info mt-4 p-4 card shadow-sm">
            <i class="bi bi-info-circle-fill me-2"></i> HenÃ¼z bir plan oluÅŸturulmadÄ±. YukarÄ±daki butona tÄ±klayarak ilk planÄ±nÄ± oluÅŸtur!
        </div>
    {% endif %}

    <script>
        // HaftalÄ±k Plan butonu iÃ§in spinner
        const planForm = document.getElementById('plan-form');
        const planButton = document.getElementById('plan-button');

        if (planForm) {
            planForm.addEventListener('submit', function() {
                planButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> OluÅŸturuluyor...';
                planButton.disabled = true;
                planButton.classList.add('btn-secondary');
                planButton.classList.remove('btn-success');
                showLoadingSpinner(); // Genel yÃ¼kleme spinner'Ä±nÄ± gÃ¶ster
            });
        }
    </script>
{% endblock content %}