{% extends "layout.html" %}
{% block content %}
<h2 class="mb-4 text-primary"><i class="bi bi-speedometer2 me-2"></i> Admin Paneli</h2>
<div class="row g-4 mb-5">
    <div class="col-md-4">
        <div class="card text-white bg-primary shadow-sm" style="background-color: var(--primary-soft) !important;">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-people-fill me-2"></i> Toplam Kullanıcı</h5>
                <p class="card-text fs-1 fw-bold">{{ user_count }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success shadow-sm">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-patch-question-fill me-2"></i> Toplam Soru Analizi</h5>
                <p class="card-text fs-1 fw-bold">{{ soru_count }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-info shadow-sm" style="background-color: var(--info-soft) !important;">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-journal-check me-2"></i> Toplam Deneme Kaydı</h5>
                <p class="card-text fs-1 fw-bold">{{ deneme_count }}</p>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-5 text-primary">Kullanıcı Listesi</h3>
<div class="table-responsive card shadow-sm p-3">
    <table class="table table-hover align-middle">
        <thead class="table-dark">
            <tr><th>ID</th><th>Kullanıcı Adı</th><th>Admin mi?</th><th>İşlemler</th></tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{% if user.is_admin %}<span class="badge bg-danger">Evet</span>{% else %}<span class="badge bg-secondary">Hayır</span>{% endif %}</td>
                <td><a href="{{ url_for('user_detail', user_id=user.id) }}" class="btn btn-sm btn-outline-primary">Detayları Gör</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}